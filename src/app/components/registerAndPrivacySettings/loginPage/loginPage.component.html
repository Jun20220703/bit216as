<div class="full-page-wrapper">
  <!-- Top Logo Section -->
  <div class="top-logo-section">
    <img src="assets/images/image1.png" alt="Food Shield Logo" class="top-logo-img">
  </div>

  <!-- Main Content Area -->
  <div class="main-content">
    <!-- Left Panel with Image and Text -->
    <div class="left-slogan-panel">
      <div class="globe-container">
        <img src="assets/images/image2.png" alt="Globe with trees" class="globe-img">
      </div>
      <div class="slogan-text-container">
        <p>Manage your food, reduce</p>
        <p>waste, save money, and</p>
        <p>care for the environment</p>
        <p class="slogan-highlight">We Make a Difference</p>
      </div>
    </div>

    <!-- Right Panel with Login/Register Form -->
    <div class="container" [class.active]="isRegisterMode" id="container">
  <div class="form-container log-in">
    <form (ngSubmit)="onLogin()">
      <h1>Log In</h1>
      <input type="email" placeholder="Email" [(ngModel)]="email" name="email">
      <input type="password" placeholder="Password" [(ngModel)]="password" name="password">
      <a href="javascript:void(0)" (click)="onForgotPassword($event)" class="forgot-password">Forgot Your Password?</a>
      <button type="submit" [disabled]="isLoading">
        <span *ngIf="!isLoading">Log In</span>
        <span *ngIf="isLoading">Logging in...</span>
      </button>
    </form>
  </div>
  <div class="form-container register">
    <form (ngSubmit)="onRegister()">
      <h1>Go to Registration</h1>
      <span>Click the register button to go to the registration page</span>
      <button type="submit">Register</button>
    </form>
  </div>
  <div class="toggle-container">
    <div class="toggle">
      <div class="toggle-panel toggle-left">
        <h1>Welcome Back!</h1>
        <p>Enter your personal details to use all of site features</p>
        <button class="hidden" (click)="toggleMode()">Log In</button>
      </div>
      <div class="toggle-panel toggle-right">
        <h1>Welcom Back!</h1>
        <p>Register with your personal details to use all of site features</p>
        <button class="hidden" (click)="toggleMode()">Register</button>
      </div>
    </div>
  </div>
  </div>
  </div>

  <!-- Password Recovery Modal -->
  <div *ngIf="showPasswordRecovery" class="password-recovery-overlay">
    <div class="password-recovery-modal">
      <div class="password-recovery-content">
        <h2>Password Recovery</h2>
        <p *ngIf="!recoveryStep || recoveryStep === 'email'">Enter your email address and we'll send you a verification code to reset your password.</p>
          <p *ngIf="recoveryStep === 'verify'">Enter the 6-digit verification code sent to your email address.</p>
        <p *ngIf="recoveryStep === 'reset'">Enter your new password.</p>
        
        <!-- Step 1: Email Input -->
        <form *ngIf="recoveryStep === 'email' || (!recoveryStep && !isRecoveryLoading)" (ngSubmit)="onPasswordRecovery()" class="recovery-form">
          <div class="form-group">
            <label for="recovery-email">Email Address:</label>
            <input 
              type="email" 
              id="recovery-email" 
              [(ngModel)]="recoveryEmail" 
              name="recoveryEmail"
              placeholder="Enter your email address"
              required>
          </div>
          
          <div class="recovery-buttons">
            <button type="button" class="cancel-recovery-btn" (click)="onCancelRecovery()">Cancel</button>
            <button type="submit" class="send-recovery-btn" [disabled]="isRecoveryLoading">
              <span *ngIf="!isRecoveryLoading">Send Verification Code</span>
              <span *ngIf="isRecoveryLoading">Sending...</span>
            </button>
          </div>
        </form>

          <!-- Step 2: Verification Code Input -->
          <form *ngIf="recoveryStep === 'verify' && !twoFactorEmail" (ngSubmit)="onVerifyCode()" class="recovery-form">
            <div class="form-group">
              <label for="verification-code">Verification Code:</label>
              <input 
                type="text" 
                id="verification-code" 
                [(ngModel)]="verificationCode" 
                name="verificationCode"
                placeholder="Enter 6-digit code"
                maxlength="6"
                pattern="[0-9]{6}"
                required>
            </div>
            
            <!-- Timer display below input field -->
            <div *ngIf="timeLeft > 0" class="timer-display">
              <span class="timer-label">Time remaining:</span>
              <span class="timer-value">{{ getTimeLeftFormatted() }}</span>
            </div>
          
          <div class="recovery-buttons">
            <button type="button" class="cancel-recovery-btn" (click)="onCancelRecovery()">Cancel</button>
            <button type="button" class="resend-code-btn" (click)="onResendCode()" [disabled]="isRecoveryLoading">
              <span *ngIf="!isRecoveryLoading">Resend Code</span>
              <span *ngIf="isRecoveryLoading">Sending...</span>
            </button>
            <button type="submit" class="verify-code-btn" [disabled]="isRecoveryLoading">
              <span *ngIf="!isRecoveryLoading">Verify Code</span>
              <span *ngIf="isRecoveryLoading">Verifying...</span>
            </button>
          </div>
        </form>

        <!-- 2FA Verification Code Input -->
        <form *ngIf="recoveryStep === 'verify' && twoFactorEmail" (ngSubmit)="onVerify2FACode()" class="recovery-form">
          <div class="form-group">
            <label for="two-factor-code">2FA Verification Code:</label>
            <input 
              type="text" 
              id="two-factor-code" 
              [(ngModel)]="twoFactorCode" 
              name="twoFactorCode"
              placeholder="Enter verification code from email"
              maxlength="6"
              pattern="[0-9]{6}"
              required>
          </div>
          
          <!-- Timer display below input field -->
          <div *ngIf="timeLeft > 0" class="timer-display">
            <span class="timer-label">Time remaining:</span>
            <span class="timer-value">{{ getTimeLeftFormatted() }}</span>
          </div>
        
          <div class="recovery-buttons">
            <button type="button" class="cancel-recovery-btn" (click)="onCancelRecovery()">Cancel</button>
            <button type="submit" class="verify-code-btn" [disabled]="isLoading">
              <span *ngIf="!isLoading">Verify Code</span>
              <span *ngIf="isLoading">Verifying...</span>
            </button>
          </div>
        </form>

        <!-- Step 3: New Password Input -->
        <form *ngIf="recoveryStep === 'reset'" (ngSubmit)="onResetPassword()" class="recovery-form">
          <div class="form-group">
            <label for="new-password">New Password:</label>
            <input 
              type="password" 
              id="new-password" 
              [(ngModel)]="newPassword" 
              name="newPassword"
              placeholder="Enter new password"
              minlength="6"
              required>
          </div>
          
          <div class="form-group">
            <label for="confirm-password">Confirm Password:</label>
            <input 
              type="password" 
              id="confirm-password" 
              [(ngModel)]="confirmPassword" 
              name="confirmPassword"
              placeholder="Confirm new password"
              minlength="6"
              required>
          </div>
          
          <div class="recovery-buttons">
            <button type="button" class="cancel-recovery-btn" (click)="onCancelRecovery()">Cancel</button>
            <button type="submit" class="reset-password-btn" [disabled]="isRecoveryLoading">
              <span *ngIf="!isRecoveryLoading">Reset Password</span>
              <span *ngIf="isRecoveryLoading">Resetting...</span>
            </button>
          </div>
        </form>
        
        <div *ngIf="recoveryMessage" class="recovery-message" [class.success]="recoverySuccess" [class.error]="!recoverySuccess">
          {{ recoveryMessage }}
        </div>
      </div>
    </div>
  </div>
</div>

<!-- 2FA Verification Code Modal -->
<div *ngIf="recoveryStep === 'verify' && twoFactorEmail" class="password-recovery-overlay">
  <div class="password-recovery-modal">
    <div class="password-recovery-content">
      <h2>Two-Factor Authentication</h2>
      <p>Enter the verification code sent to your email address.</p>
      
      <form (ngSubmit)="onVerify2FACode()" class="recovery-form">
        <div class="form-group">
          <label for="two-factor-code">Verification Code:</label>
          <input 
            type="text" 
            id="two-factor-code" 
            [(ngModel)]="twoFactorCode" 
            name="twoFactorCode"
            placeholder="Enter verification code from email"
            maxlength="6"
            pattern="[0-9]{6}"
            required>
        </div>
        
        <!-- Timer display below input field -->
        <div *ngIf="timeLeft > 0" class="timer-display">
          <span class="timer-label">Time remaining:</span>
          <span class="timer-value">{{ getTimeLeftFormatted() }}</span>
        </div>
      
        <div class="recovery-buttons">
          <button type="button" class="cancel-recovery-btn" (click)="onCancelRecovery()">Cancel</button>
          <button type="button" class="resend-code-btn" (click)="onResend2FACode()" [disabled]="isLoading">
            <span *ngIf="!isLoading">Resend Code</span>
            <span *ngIf="isLoading">Sending...</span>
          </button>
          <button type="submit" class="verify-code-btn" [disabled]="isLoading">
            <span *ngIf="!isLoading">Verify Code</span>
            <span *ngIf="isLoading">Verifying...</span>
          </button>
        </div>
        
        <!-- 2FA 메시지 표시 (버튼들 밑에) -->
        <div *ngIf="recoveryMessage" class="twofa-message" [class.success]="recoverySuccess" [class.error]="!recoverySuccess">
          {{ recoveryMessage }}
        </div>
      </form>
    </div>
  </div>
</div>
